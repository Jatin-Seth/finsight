<%- include('layouts/header') %>

<div style="text-align: center; padding: 40px 20px;">

    <!-- Error Icon -->
    <div style="font-size: 4em; color: #f44336; margin-bottom: 20px;">
        ⚠️
    </div>

    <!-- Error Title -->
    <h2 style="color: #2c3e50; margin-bottom: 20px;">Oops! Something went wrong</h2>

    <!-- Error Message -->
    <div style="background-color: #ffebee; border: 1px solid #f44336; padding: 20px; border-radius: 8px; margin: 20px auto; max-width: 600px;">
        <div style="color: #c62828; font-size: 1.1em; margin-bottom: 10px;">
            <strong>Error Details:</strong>
        </div>
        <p style="color: #c62828; margin: 0; font-size: 1em;">
            <%= message || 'An unexpected error occurred. Please try again.' %>
        </p>
    </div>

    <!-- Help Text -->
    <div style="margin: 30px auto; max-width: 500px; color: #666; line-height: 1.6;">
        <p>Don't worry! This happens sometimes. Here are a few things you can try:</p>
        <ul style="text-align: left; display: inline-block; margin: 0; padding: 0;">
            <li style="margin-bottom: 8px;">🔄 Refresh the page and try again</li>
            <li style="margin-bottom: 8px;">🏠 Go back to the dashboard</li>
            <li style="margin-bottom: 8px;">🔐 Make sure you're logged in</li>
            <li style="margin-bottom: 8px;">🌐 Check your internet connection</li>
        </ul>
    </div>

    <!-- Action Buttons -->
    <div style="margin-top: 40px;">
        <a href="javascript:history.back()"
           style="background-color: #2196F3; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px; margin-right: 10px; display: inline-block;">
            ← Go Back
        </a>

        <a href="/demo/dashboard"
           style="background-color: #4CAF50; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px; margin-right: 10px; display: inline-block;">
            🏠 Dashboard
        </a>

        <a href="/demo/login"
           style="background-color: #FF9800; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px; display: inline-block;">
            🔐 Login
        </a>
    </div>

    <!-- Additional Help -->
    <div style="margin-top: 40px; padding: 20px; background-color: #f8f9fa; border-radius: 8px; max-width: 600px; margin-left: auto; margin-right: auto;">
        <h4 style="color: #2c3e50; margin-top: 0;">Need More Help?</h4>
        <p style="color: #666; margin-bottom: 10px;">
            If this error persists, try these troubleshooting steps:
        </p>
        <div style="text-align: left; color: #666;">
            <p><strong>For Login Issues:</strong></p>
            <ul style="margin-bottom: 15px;">
                <li>Clear your browser cookies and cache</li>
                <li>Make sure you're using the correct email and password</li>
                <li>Try logging out and logging back in</li>
            </ul>

            <p><strong>For Portfolio Issues:</strong></p>
            <ul style="margin-bottom: 15px;">
                <li>Make sure the portfolio exists and belongs to you</li>
                <li>Check if you have permission to access this portfolio</li>
                <li>Try refreshing the portfolio list</li>
            </ul>

            <p><strong>For Technical Issues:</strong></p>
            <ul>
                <li>Try using a different browser</li>
                <li>Disable browser extensions temporarily</li>
                <li>Check if the server is running properly</li>
            </ul>
        </div>
    </div>

</div>

<!-- Auto-refresh script (optional) -->
<script>
    // Optional: Add a retry button that refreshes after a delay
    function autoRetry() {
        let countdown = 10;
        const retryBtn = document.createElement('button');
        retryBtn.style.cssText = 'background-color: #6c757d; color: white; padding: 8px 16px; border: none; border-radius: 4px; margin-top: 20px; cursor: pointer;';
        retryBtn.innerHTML = `Auto-retry in ${countdown}s (click to retry now)`;

        const interval = setInterval(() => {
            countdown--;
            retryBtn.innerHTML = `Auto-retry in ${countdown}s (click to retry now)`;
            if (countdown <= 0) {
                clearInterval(interval);
                window.location.reload();
            }
        }, 1000);

        retryBtn.addEventListener('click', () => {
            clearInterval(interval);
            window.location.reload();
        });

        // Uncomment the line below if you want auto-retry functionality
        // document.querySelector('div[style*="margin-top: 40px"]').appendChild(retryBtn);
    }

    // Uncomment if you want auto-retry
    // setTimeout(autoRetry, 2000);
</script>

<%- include('layouts/footer') %>